<!DOCTYPE html>
<html class="no-js" lang="en">

<!-- Site-wide and Page-wide Variables
     ---------------------------------
  We pull in "common_variables.html" to define a whole bunch of common variables
  in the `.Scratch` object, and selectively extract the ones we want to use
  below.

{{ partial "common_variables.html" . }}

{{ $project             := .Scratch.Get "project" }}
{{ $version             := .Scratch.Get "version" }}
{{ $project_path        := .Scratch.Get "project_path" }}
{{ $is_latest           := .Scratch.Get "is_latest" }}
{{ $is_lts              := .Scratch.Get "is_lts" }}
{{ $toc                 := .Scratch.Get "toc"}}
{{ $commercial_offering := .Scratch.Get "commercial_offering"}}

{{ $has_supertext := isset .Params "title_supertext" }}
-->

<!-- {{ partial "head.html" . }} -->

<head>
  <meta charset="utf-8">

  <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
  <link rel="canonical" href="{{ .Params.canonical_link }}" />

  <meta name="viewport" content="width=device-width">
  <meta name="project" content="{{ .Params.project }}">
  <meta name="version" content="{{ .Params.project_version }}">

  <title>{{ .Title }}</title>

  <link href="/css/sandbox.css" media="screen" rel="stylesheet" type="text/css">
  <link href="/css/print.css" media="print" rel="stylesheet" type="text/css">

  <!--
    Iff JavaScript is enabled, we want to hide all pre>code blocks so we can
    avoid the pre-to-post style bounce. We do this by hiding all pre elements
    that follow a .js_enabled class, and apply that class to the HTML element
    with some JavaScript.
    We can't use the Modernizr .js class because we want this hidden before we
    give modernizr a chance to load.
    TODO: Switch to a more robust class & better name for this functionality.
  -->
  <style type="text/css"> .js_enabled pre { visibility : hidden; } </style>
  <script type="text/javascript">
    document.documentElement.className = 'js_enabled';
  </script>
</head>

<!-- END {{ partial "head.html" . }} -->

<body class="{{$project}} {{$version}} {{if $is_latest}}latest{{end}} {{if $is_lts}}lts{{end}}">

  {{ partial "google_tag_manager.html" . }}

  {{ $menu_title := (printf "%s-%s" .Params.project .Params.project_version) }}
  {{ partial "navigation_sidebar.html" (dict "context" . "menu_title" $menu_title) }}

  <!--TODO: Should this be moved to align with/be part of scripts.html? -->
  {{ partial "search.html" . }}

  <div role="main">

    <!-- {{ partial "header.html" . }} -->
    <!-- TODO: Remane the partial to "banner.html" -->

    <header class="masthead">
      <div id="header">
        <!-- Marketing Flag
             ==============
          Only displayed in full-width and on the 'latest' project version
          TODO(Drew): Should the content be extracted to a config file somewhere?
                        Hint: Yes.
        -->
        {{ if $.Scratch.Get "is_latest" }}

        <!-- {{ partial "marketing_banner.html" . }} -->
        <!-- TODO: Rename this "banner--marketing-flag" -->

          <div id="marketing-banner">
            <div id="marketing-banner-inner">
              <a class="more" href="http://info.basho.com/Docs-Registrations_Sign-up-to-be-notified-LP.html?utm_medium=display&utm_campaign=&utm_source=display&utm_content=Basho-OSS-Download-Page&utm_term=Docs-Registrations-Page&utm_channel=Online%20Advertising"></a>
              <div class="temp-banner-text">
                <strong>Register</strong> to be kept up-to-date on Riak releases, education, and events
              </div>
            </div>
          </div>

        <!-- END {{ partial "marketing_banner.html" . }} -->
        {{ end }}

        <div id="header-inner">
          <div class="icon-reorder" id="nav-toggle"></div>

          <div id="top-nav">
            {{ if $.Scratch.Get "project_path"}}
            <a href="/{{$.Scratch.Get "project_path"}}/{{$.Scratch.Get "version"}}/downloads/"><span class="icon-download-alt"></span>Downloads</a>
            {{ end }}
          </div>

          <a class="responsive-toggle"></a>
          {{/*TODO(Drew): Figure out why we have text here that's not ever going
                          to be rendered. */}}
          {{/*TODO(Drew): Find and render a per-project image logo here. */}}
          <a class="logo" href="/index.html"><h1>Riak Docs</h1></a>
          {{/*TODO(Drew): This apparently this was just never rendered? What and
                          why? No really. Why. */}}
          <span class="tagline">Product tutorials, how-tos, and fully-documented APIs.</span>
          <div id="nav-menu">
            <h2>Links</h2>
            <ul>
              <li><a href="http://docs.basho.com/">Docs Home</a></li>
              <li><a href="http://basho.com/">Basho Website</a></li>
            </ul>
            {{/*TODO(Drew): These make the little upward bump arrow thing. That
                            took me half an hour to figure out, so I'd like to
                            rename them. */}}
            <div id="nav-menu-arrow"></div>
            <div id="nav-menu-arrow-back"></div>
          </div>

          <div class="clear"></div>

          <div class="header-rule"></div>
        </div>
      </div>
    </header>

    <!--  END {{ partial "header.html" . }} -->


    <article class="mainarticle">

      {{ partial "version-ddown.html" . }}

      <header>
        {{ if $has_supertext }}<h1 class="title_supertext">{{ .Params.title_supertext }}</h1>{{ end }}
        <h1>{{ .Title }}</h1>
      </header>

      {{ if $commercial_offering }}
      <div class="enterprise">
        This document applies only to Riak Enterprise, Basho's <a href="http://info.basho.com/Wiki_Riak_Enterprise_Request.html">commercial offering</a>.
      </div>
      {{ end }}

      {{ if $toc }}
      <nav id="toc">
        <h2 class="title">Contents</h2>
        <div id="toc-wrapper">
          <ol id="toc-items"></ol>
        </div>
      </nav>
      {{ end }}

      {{ .Content }}

      <div class="clear"></div>

    </article>

    <!-- {{ partial "footer.html" . }} -->

    <footer>
      <p class="center-text">
        <a href="http://basho.com/">Basho.com</a>&nbsp;&nbsp;-&nbsp;&nbsp;<a href="http://docs.basho.com/">Docs Home</a>&nbsp;&nbsp;-&nbsp;&nbsp;<a href="http://basho.com/contact/">Contact Basho</a>
      </p>
      <p class="center-text">
        This work is licensed under a
        <a href="http://creativecommons.org/licenses/by/4.0/" target="_blank">Creative Commons Attribution 4.0 International Public License</a>
        <br>
        Â© 2011-2016&nbsp;<a href="http://www.basho.com">Basho Technologies, Inc.</a>
      </p>
    </footer>

    <!-- END {{ partial "footer.html" . }} -->

  </div>

  <!-- {{ partial "scripts.html" . }} -->

  <script src="/js/sandbox.js" type="text/javascript"></script>
  <script type= "text/javascript">
    // Make visible all ".js_enabled pre" blocks and load Highlight.js without any
    // language autodetection.
    // Be sure to do it in a JQuery callback, since we only want to reveal these
    // after code-tabs.js has gotten its callback in.
    $(function() {
      $(".js_enabled pre").css("visibility", "visible");
      hljs.configure({languages: []});
      hljs.initHighlighting();
    });
  </script>

  <!-- END {{ partial "scripts.html" . }} -->

</body>
</html>
